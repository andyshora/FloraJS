/*! Flora v3.0.0 - 2014-08-04 06:08:26 
Vince Allen |Brooklyn, NY | vince@vinceallen.com | @vinceallenvince | License: MIT */

!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Flora=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c={ColorPalette:a("./src/ColorPalette").ColorPalette,System:a("Burner").System,Utils:a("Burner").Utils,Vector:a("Burner").Vector,World:a("Burner").World};c.System.Classes={Agent:a("./src/Agent").Agent,Attractor:a("./src/Attractor").Attractor,BorderPalette:a("./src/BorderPalette").BorderPalette,Connector:a("./src/Connector").Connector,Dragger:a("./src/Dragger").Dragger,Mover:a("./src/Mover").Mover,Oscillator:a("./src/Oscillator").Oscillator,Particle:a("./src/Particle").Particle,ParticleSystem:a("./src/ParticleSystem").ParticleSystem,Point:a("./src/Point").Point,Repeller:a("./src/Repeller").Repeller,Sensor:a("./src/Sensor").Sensor,Stimulus:a("./src/Stimulus").Stimulus,Walker:a("./src/Walker").Walker},b.exports=c},{"./src/Agent":9,"./src/Attractor":10,"./src/BorderPalette":11,"./src/ColorPalette":12,"./src/Connector":13,"./src/Dragger":14,"./src/Mover":15,"./src/Oscillator":16,"./src/Particle":17,"./src/ParticleSystem":18,"./src/Point":19,"./src/Repeller":20,"./src/Sensor":21,"./src/Stimulus":23,"./src/Walker":24,Burner:8}],2:[function(a,b){function c(){c._idCount++}var d=a("./Vector").Vector;c._idCount=0,c._stylePosition="transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -webkit-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -moz-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -o-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -ms-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>);",c.prototype.init=function(a,b){if(!a||"object"!=typeof a)throw new Error("Item requires an instance of World.");this.world=a;var e=b||{};this.name="undefined"!=typeof this.name?this.name:e.name||"Item",this.width="undefined"!=typeof this.width?this.width:"undefined"==typeof e.width?10:e.width,this.height="undefined"!=typeof this.height?this.height:"undefined"==typeof e.height?10:e.height,this.scale="undefined"!=typeof this.scale?this.scale:e.scale||1,this.angle="undefined"!=typeof this.angle?this.angle:e.angle||0,this.colorMode="undefined"!=typeof this.colorMode?this.colorMode:e.colorMode||"rgb",this.color="undefined"!=typeof this.color?this.color:e.color||[0,0,0],this.borderWidth="undefined"!=typeof this.borderWidth?this.borderWidth:e.borderWidth||0,this.borderStyle="undefined"!=typeof this.borderStyle?this.borderStyle:e.borderStyle||"none",this.borderColor="undefined"!=typeof this.borderColor?this.borderColor:e.borderColor||[255,255,255],this.borderRadius="undefined"!=typeof this.borderRadius?this.borderRadius:e.borderRadius||0,this.boxShadowOffsetX="undefined"!=typeof this.boxShadowOffsetX?this.boxShadowOffsetX:e.boxShadowOffsetX||0,this.boxShadowOffsetY="undefined"!=typeof this.boxShadowOffsetY?this.boxShadowOffsetY:e.boxShadowOffsetY||0,this.boxShadowBlur="undefined"!=typeof this.boxShadowBlur?this.boxShadowBlur:e.boxShadowBlur||0,this.boxShadowSpread="undefined"!=typeof this.boxShadowSpread?this.boxShadowSpread:e.boxShadowSpread||0,this.boxShadowColor="undefined"!=typeof this.boxShadowColor?this.boxShadowColor:e.boxShadowColor||[255,255,255],this.opacity="undefined"!=typeof this.opacity?this.opacity:e.opacity||1,this.zIndex="undefined"!=typeof this.zIndex?this.zIndex:e.zIndex||0,this.mass="undefined"!=typeof this.mass?this.mass:"undefined"==typeof e.mass?10:e.mass,this.acceleration="undefined"!=typeof this.acceleration?this.acceleration:e.acceleration||new d,this.velocity="undefined"!=typeof this.velocity?this.velocity:e.velocity||new d,this.location="undefined"!=typeof this.location?this.location:e.location||new d(this.world.width/2,this.world.height/2),this.maxSpeed="undefined"!=typeof this.maxSpeed?this.maxSpeed:"undefined"==typeof e.maxSpeed?10:e.maxSpeed,this.minSpeed="undefined"!=typeof this.minSpeed?this.minSpeed:e.minSpeed||0,this.bounciness="undefined"!=typeof this.bounciness?this.bounciness:e.bounciness||.5,this.life="undefined"!=typeof this.life?this.life:e.life||0,this.lifespan="undefined"!=typeof this.lifespan?this.lifespan:e.lifespan||-1,this.checkWorldEdges="undefined"!=typeof this.checkWorldEdges?this.checkWorldEdges:"undefined"==typeof e.checkWorldEdges?!0:e.checkWorldEdges,this.wrapWorldEdges="undefined"!=typeof this.wrapWorldEdges?this.wrapWorldEdges:!!e.wrapWorldEdges,this.beforeStep="undefined"!=typeof this.beforeStep?this.beforeStep:e.beforeStep||function(){},this.afterStep="undefined"!=typeof this.afterStep?this.afterStep:e.afterStep||function(){},this.controlCamera="undefined"!=typeof this.controlCamera?this.controlCamera:!!e.controlCamera,this._force=this._force||new d,this.id=this.name+c._idCount,this.el||(this.el=document.createElement("div"),this.el.id=this.id,this.el.className="item "+this.name.toLowerCase(),this.el.style.position="absolute",this.el.style.top="-5000px",this.world.add(this.el))},c.prototype.step=function(){var a=this.location.x,b=this.location.y;this.beforeStep.call(this),this.applyForce(this.world.gravity),this.applyForce(this.world.wind),this.velocity.add(this.acceleration),this.velocity.limit(this.maxSpeed,this.minSpeed),this.location.add(this.velocity),this.checkWorldEdges?this._checkWorldEdges():this.wrapWorldEdges&&this._wrapWorldEdges(),this.controlCamera&&this._checkCameraEdges(a,b,this.location.x,this.location.y),this.acceleration.mult(0),this.afterStep.call(this)},c.prototype.applyForce=function(a){return a?(this._force.x=a.x,this._force.y=a.y,this._force.div(this.mass),this.acceleration.add(this._force),this.acceleration):void 0},c.prototype._checkWorldEdges=function(){var a=this.world.width,b=this.world.height,c=this.location,d=this.velocity,e=this.width*this.scale,f=this.height*this.scale,g=this.bounciness;c.x+e/2>a?(c.x=a-e/2,d.x*=-1*g):c.x<e/2&&(c.x=e/2,d.x*=-1*g),c.y+f/2>b?(c.y=b-f/2,d.y*=-1*g):c.y<f/2&&(c.y=f/2,d.y*=-1*g)},c.prototype._wrapWorldEdges=function(){var a=this.world.width,b=this.world.height,c=this.location,d=this.width*this.scale,e=this.height*this.scale;c.x-d/2>a?c.x=-d/2:c.x<-d/2&&(c.x=a+d/2),c.y-e/2>b?c.y=-e/2:c.y<-e/2&&(c.y=b+e/2)},c.prototype._checkCameraEdges=function(a,b,c,d){this.world._camera.x=a-c,this.world._camera.y=b-d},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,colorMode:this.colorMode,color0:this.color[0],color1:this.color[1],color2:this.color[2],opacity:this.opacity,zIndex:this.zIndex});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return c._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); opacity: "+a.opacity+"; z-index: "+a.zIndex+";"},b.exports.Item=c},{"./Vector":6}],3:[function(a,b){function c(){}c.name="StatsDisplay",c.active=!1,c.fps=!1,c._time=Date.now(),c._timeLastFrame=c._time,c._timeLastSecond=c._time,c._frameCount=0,c.init=function(){c.active=!0,c.el=document.createElement("div"),c.el.id="statsDisplay",c.el.className="statsDisplay",c.el.style.backgroundColor="black",c.el.style.color="white",c.el.style.fontFamily="Helvetica",c.el.style.padding="0.5em",c.el.style.opacity="0.5";var a=document.createElement("span");a.className="statsDisplayLabel",a.style.marginLeft="0.5em",b=document.createTextNode("total elements: "),a.appendChild(b),c.el.appendChild(a),c.totalElementsValue=document.createTextNode("0"),c.el.appendChild(c.totalElementsValue),a=document.createElement("span"),a.className="statsDisplayLabel",a.style.marginLeft="0.5em";var b=document.createTextNode("fps: ");a.appendChild(b),c.el.appendChild(a),c.fpsValue=document.createTextNode("0"),c.el.appendChild(c.fpsValue),document.body.appendChild(c.el)},c.update=function(a){var b=c,d=a||0;b._time=Date.now(),b._frameCount++,b._time>b._timeLastSecond+1e3&&(b.fps=b._frameCount,b._timeLastSecond=b._time,b._frameCount=0,b.fpsValue.nodeValue=b.fps,b.totalElementsValue.nodeValue=d)},c.hide=function(){var a=document.getElementById(c.el.id);a.style.display="none"},c.show=function(){var a=document.getElementById(c.el.id);a.style.display="block"},b.exports.StatsDisplay=c},{}],4:[function(a,b){var c=a("./Item").Item,d=a("./World").World,e=a("./Vector").Vector,f=a("./Utils").Utils,g=a("./StatsDisplay").StatsDisplay;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var h={name:"System"};h.Classes={Item:c},h.gravity=new e(0,1),h.wind=new e,h._records=[],h._pool=[],h.mouse={location:new e,lastLocation:new e,velocity:new e},h._statsDisplay=null,h.setup=function(a){var b=a||function(){};document.body.onorientationchange=h.updateOrientation,f.addEvent(document,"mousemove",h._recordMouseLoc),f.addEvent(window,"touchstart",h._recordMouseLoc),f.addEvent(window,"touchmove",h._recordMouseLoc),f.addEvent(window,"touchend",h._recordMouseLoc),f.addEvent(window,"keyup",h._keyup),h.setupFunc=b,h.setupFunc.call(this)},h.init=function(a,b){h.setup(a,b)},h._addWorld=function(a){h._records.push(a)},h.add=function(a,b,e){var f=a||"Item",g=b||null,i=e||h._records[0],j=this._records;return h._pool.length?j[j.length]=h._cleanObj(h._pool.splice(0,1)[0]):j.push("world"===f.toLowerCase()?new d(g):h.Classes[f]?new h.Classes[f](g):new c),j[j.length-1].init(i,g),j[j.length-1]},h._cleanObj=function(a){for(var b in a)a.hasOwnProperty(b)&&delete a[b];return a},h.remove=function(a){var b,c,d=h._records;for(b=0,c=d.length;c>b;b++)if(d[b].id===a.id){d[b].el.style.visibility="hidden",h._pool[h._pool.length]=d.splice(b,1)[0];break}},h.destroy=function(a){h.remove(a)},h.loop=function(){var a,b=h._records,c=h._records.length;for(a=c-1;a>=0;a-=1)if(b[a].step&&!b[a].world.pauseStep){if(b[a].life<b[a].lifespan)b[a].life+=1;else if(-1!==b[a].lifespan){h.remove(b[a]);continue}b[a].step()}for(c=h._records.length,a=c-1;a>=0;a-=1)b[a].draw();g.active&&g.update(c),"undefined"!=typeof window.requestAnimationFrame&&window.requestAnimationFrame(h.loop)},h._stepForward=function(){var a,b,c,d,e=h._records,f=h.allWorlds();for(a=0,c=f.length;c>a;a++){for(d=f[a],d.pauseStep=!0,b=e.length-1;b>=0;b-=1)e[b].step&&e[b].step();for(b=e.length-1;b>=0;b-=1)e[b].draw&&e[b].draw()}},h._recordMouseLoc=function(a){var b,c=h.firstWorld();h.mouse.lastLocation.x=h.mouse.location.x,h.mouse.lastLocation.y=h.mouse.location.y,a.changedTouches&&(b=a.changedTouches[0]),a.pageX&&a.pageY?(h.mouse.location.x=f.map(a.pageX,0,window.innerWidth,0,c.width),h.mouse.location.y=f.map(a.pageY,0,window.innerHeight,0,c.height)):a.clientX&&a.clientY?(h.mouse.location.x=f.map(a.clientX,0,window.innerWidth,0,c.width),h.mouse.location.y=f.map(a.clientY,0,window.innerHeight,0,c.height)):b&&(h.mouse.location.x=b.pageX,h.mouse.location.y=b.pageY),h.mouse.velocity.x=h.mouse.lastLocation.x-h.mouse.location.x,h.mouse.velocity.y=h.mouse.lastLocation.y-h.mouse.location.y},h.firstWorld=function(){return this._records.length?this._records[0]:null},h.allWorlds=function(){return h.getAllItemsByName("World")},h.getAllItemsByName=function(a,b){var c,d,e=[],f=b||this._records;for(c=0,d=f.length;d>c;c++)f[c].name===a&&(e[e.length]=f[c]);return e},h.updateOrientation=function(){var a,b=h.allWorlds(),c=b.length;for(a=0;c>a;a++)b[a].width=b[a].el.scrollWidth,b[a].height=b[a].el.scrollHeight},h._keyup=function(a){var b,c,d,e=h.allWorlds();switch(a.keyCode){case 39:h._stepForward();break;case 80:for(b=0,c=e.length;c>b;b++)d=e[b],d.pauseStep=!d.pauseStep;break;case 82:h._resetSystem();break;case 83:h._toggleStats()}},h._resetSystem=function(){var a,b,c,d=h.allWorlds();for(a=0,b=d.length;b>a;a++)for(c=d[a],c.pauseStep=!1,c.pauseDraw=!1;c.el.firstChild;)c.el.removeChild(c.el.firstChild);h._records=[],h._pool=[],h.setup(h.setupFunc)},h._toggleStats=function(){g.fps?g.active=!g.active:g.init(),g.active?g.show():g.hide()},b.exports.System=h},{"./Item":2,"./StatsDisplay":3,"./Utils":5,"./Vector":6,"./World":7}],5:[function(a,b){var c={name:"Utils"};c.extend=function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a._superClass=b.prototype},c.getRandomNumber=function(a,b,c){return c?Math.random()*(b-(a-1))+a:Math.floor(Math.random()*(b-(a-1)))+a},c.map=function(a,b,c,d,e){var f=(a-b)/(c-b);return f*(e-d)+d},c.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},c.degreesToRadians=function(a){if("undefined"!=typeof a)return 2*Math.PI*(a/360);if("undefined"!=typeof console)throw new Error("Error: Utils.degreesToRadians is missing degrees param.")},c.radiansToDegrees=function(a){if("undefined"!=typeof a)return a*(180/Math.PI);if("undefined"!=typeof console)throw new Error("Error: Utils.radiansToDegrees is missing radians param.")},c.constrain=function(a,b,c){return a>c?c:b>a?b:a},c.isInside=function(a,b){if(!a||!b)throw new Error("isInside() requires both an object and a container.");return a.width=a.width||0,a.height=a.height||0,b.width=b.width||0,b.height=b.height||0,a.location.x+a.width/2>b.location.x-b.width/2&&a.location.x-a.width/2<b.location.x+b.width/2&&a.location.y+a.height/2>b.location.y-b.height/2&&a.location.y-a.height/2<b.location.y+b.height/2?!0:!1},b.exports.Utils=c},{}],6:[function(a,b){function c(a,b){var c=a||0,d=b||0;this.x=c,this.y=d}c.VectorSub=function(a,b){return new c(a.x-b.x,a.y-b.y)},c.VectorAdd=function(a,b){return new c(a.x+b.x,a.y+b.y)},c.VectorMult=function(a,b){return new c(a.x*b,a.y*b)},c.VectorDiv=function(a,b){return new c(a.x/b,a.y/b)},c.VectorDistance=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},c.VectorMidPoint=function(a,b){return c.VectorAdd(a,b).div(2)},c.VectorAngleBetween=function(a,b){var c=a.dot(b),d=Math.acos(c/(a.mag()*b.mag()));return d},c.prototype.name="Vector",c.prototype.clone=function(){function a(){}return a.prototype=this,new a},c.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},c.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},c.prototype.mult=function(a){return this.x*=a,this.y*=a,this},c.prototype.div=function(a){return this.x=this.x/a,this.y=this.y/a,this},c.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.prototype.limit=function(a,b){var c=a||null,d=b||null;return c&&this.mag()>c&&(this.normalize(),this.mult(c)),d&&this.mag()<d&&(this.normalize(),this.mult(d)),this},c.prototype.normalize=function(){var a=this.mag();return 0!==a?this.div(a):void 0},c.prototype.distance=function(a){return Math.sqrt(Math.pow(a.x-this.x,2)+Math.pow(a.y-this.y,2))},c.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.x,e=this.y;return this.x=d*b-e*c,this.y=d*c+e*b,this},c.prototype.midpoint=function(a){return c.VectorAdd(this,a).div(2)},c.prototype.dot=function(a){return this.x*a.x+this.y*a.y},b.exports.Vector=c},{}],7:[function(a,b){function c(a){e.call(this);var b=a||{};this.el=b.el||document.body,this.name="World",this.world={}}var d=a("./Vector").Vector,e=a("./Item").Item,f=a("./Utils").Utils;f.extend(c,e),c.prototype.init=function(a,b){c._superClass.init.call(this,this.world,b);var e=b||{};this.color=e.color||[0,0,0],this.width=e.width||this.el.scrollWidth,this.height=e.height||this.el.scrollHeight,this.location=e.location||new d(document.body.scrollWidth/2,document.body.scrollHeight/2),this.borderWidth=e.borderWidth||0,this.borderStyle=e.borderStyle||"none",this.borderColor=e.borderColor||[0,0,0],this.gravity=e.gravity||new d(0,1),this.c=e.c||.1,this.pauseStep=!!e.pauseStep,this.pauseDraw=!!e.pauseDraw,this.el.className=this.name.toLowerCase(),this._camera=this._camera||new d},c.prototype.add=function(a){this.el.appendChild(a)},c.prototype.step=function(){this.location.add(this._camera)},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor1:this.borderColor[0],borderColor2:this.borderColor[1],borderColor3:this.borderColor[2]});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return e._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: rgb("+a.color0+", "+a.color1+", "+a.color2+"); border: "+a.borderWidth+"px "+a.borderStyle+" rgb("+a.borderColor1+", "+a.borderColor2+", "+a.borderColor3+")"},b.exports.World=c},{"./Item":2,"./Utils":5,"./Vector":6}],8:[function(a,b){b.exports={Item:a("./Item").Item,System:a("./System").System,Utils:a("./Utils").Utils,Vector:a("./Vector").Vector,World:a("./World").World}},{"./Item":2,"./System":4,"./Utils":5,"./Vector":6,"./World":7}],9:[function(a,b){function c(a){d.call(this);var b=a||{};this.name=b.name||"Agent",this.followMouse=!!b.followMouse,this.maxSteeringForce="undefined"==typeof b.maxSteeringForce?5:b.maxSteeringForce,this.seekTarget=b.seekTarget||null,this.flocking=!!b.flocking,this.separateStrength="undefined"==typeof b.separateStrength?.3:b.separateStrength,this.alignStrength="undefined"==typeof b.alignStrength?.2:b.alignStrength,this.cohesionStrength="undefined"==typeof b.cohesionStrength?.1:b.cohesionStrength,this.flowField=b.flowField||null,this.sensors=b.sensors||[],this.motorSpeed=b.motorSpeed||0,this.color=b.color||[197,177,115],this.borderWidth=b.borderWidth||0,this.borderStyle=b.borderStyle||"none",this.borderColor=b.borderColor||[255,255,255],this.borderRadius=b.borderRadius||0}var d=a("./Mover").Mover,e=a("Burner").Utils,f=a("Burner").System,g=a("Burner").Vector;e.extend(c,d),c.prototype.init=function(a,b){c._superClass.init.call(this,a,b);var d=b||{};for(this.separateSumForceVector=new g,this.alignSumForceVector=new g,this.cohesionSumForceVector=new g,this.followTargetVector=new g,this.followDesiredVelocity=new g,this.motorDir=new g,i=0,max=this.sensors.length;max>i;i++)this.sensors[i].parent=this;this.desiredSeparation="undefined"==typeof d.desiredSeparation?2*this.width:d.desiredSeparation,this.borderRadius=d.borderRadius||this.sensors.length?100:0,this.velocity.mag()||(this.velocity.x=1,this.velocity.y=0,this.velocity.normalize(),this.velocity.rotate(e.degreesToRadians(this.angle)),this.velocity.mult(this.motorSpeed))},c.prototype.applyAdditionalForces=function(){var a;if(!a&&this.motorSpeed&&(this.motorDir.x=this.velocity.x,this.motorDir.y=this.velocity.y,this.motorDir.normalize(),this.motorDir.mult(this.velocity.mag()>this.motorSpeed?-this.motorSpeed:this.motorSpeed),this.applyForce(this.motorDir)),this.followMouse){var b={location:new g(f.mouse.location.x,f.mouse.location.y)};this.applyForce(this._seek(b))}return this.seekTarget&&this.applyForce(this._seek(this.seekTarget)),this.flocking&&this._flock(f.getAllItemsByName(this.name)),this.acceleration},c.prototype._seek=function(a){var b=this.world,c=g.VectorSub(a.location,this.location),d=c.mag();if(c.normalize(),d<b.width/2){var f=e.map(d,0,b.width/2,0,this.maxSpeed);c.mult(f)}else c.mult(this.maxSpeed);return c.sub(this.velocity),c.limit(this.maxSteeringForce),c},c.prototype._flock=function(a){return this.applyForce(this._separate(a).mult(this.separateStrength)),this.applyForce(this._align(a).mult(this.alignStrength)),this.applyForce(this._cohesion(a).mult(this.cohesionStrength)),this.acceleration},c.prototype._separate=function(a){var b,c,d,e,f,h,i=0;for(this.separateSumForceVector.x=0,this.separateSumForceVector.y=0,h=this.separateSumForceVector,b=0,c=a.length;c>b;b+=1)d=a[b],this.id!==d.id&&(f=this.location.distance(d.location),f>0&&f<this.desiredSeparation&&(e=g.VectorSub(this.location,d.location),e.normalize(),e.div(f),h.add(e),i+=1));return i>0?(h.div(i),h.normalize(),h.mult(this.maxSpeed),h.sub(this.velocity),h.limit(this.maxSteeringForce),h):new g},c.prototype._align=function(a){var b,c,d,e,f,h=2*this.width,i=0;for(this.alignSumForceVector.x=0,this.alignSumForceVector.y=0,f=this.alignSumForceVector,b=0,c=a.length;c>b;b+=1)d=a[b],e=this.location.distance(d.location),e>0&&h>e&&this.id!==d.id&&(f.add(d.velocity),i+=1);return i>0?(f.div(i),f.normalize(),f.mult(this.maxSpeed),f.sub(this.velocity),f.limit(this.maxSteeringForce),f):new g},c.prototype._cohesion=function(a){var b,c,d,e,f,h=10,i=0;for(this.cohesionSumForceVector.x=0,this.cohesionSumForceVector.y=0,f=this.cohesionSumForceVector,b=0,c=a.length;c>b;b+=1)d=a[b],e=this.location.distance(d.location),e>0&&h>e&&this.id!==d.id&&(f.add(d.location),i+=1);return i>0?(f.div(i),f.sub(this.location),f.normalize(),f.mult(this.maxSpeed),f.sub(this.velocity),f.limit(this.maxSteeringForce),f):new g},b.exports.Agent=c},{"./Mover":15,Burner:8}],10:[function(a,b){function c(a){e.call(this);var b=a||{};this.name=b.name||"Attractor",this.G="undefined"==typeof b.G?10:b.G,this.mass="undefined"==typeof b.mass?1e3:b.mass,this.isStatic="undefined"==typeof b.isStatic?!0:b.isStatic,this.width="undefined"==typeof b.width?100:b.width,this.height="undefined"==typeof b.height?100:b.height,this.color=b.color||[92,187,0],this.borderStyle=b.borderStyle||"double",this.borderColor=b.borderColor||[224,228,204],this.borderRadius="undefined"==typeof b.borderRadius?100:b.borderRadius,this.boxShadowColor=b.boxShadowColor||[64,129,0],this.opacity="undefined"==typeof b.opacity?.75:b.opacity,this.zIndex="undefined"==typeof b.zIndex?1:b.zIndex}var d=a("Burner").Item,e=a("./Mover").Mover,f=a("Burner").Utils,g=a("Burner").Vector;f.extend(c,e),c.prototype.init=function(a,b){c._superClass.init.call(this,a,b);var d=b||{};this.borderWidth="undefined"==typeof d.borderWidth?this.width/4:d.borderWidth,this.boxShadowSpread="undefined"==typeof d.boxShadowSpread?this.width/4:d.boxShadowSpread},c.prototype.attract=function(a){var b=g.VectorSub(this.location,a.location),c=f.constrain(b.mag(),a.width*a.height,this.width*this.height);b.normalize();var d=this.G*this.mass*a.mass/(c*c);return b.mult(d),b},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2],boxShadowOffsetX:this.boxShadowOffsetX,boxShadowOffsetY:this.boxShadowOffsetY,boxShadowBlur:this.boxShadowBlur,boxShadowSpread:this.boxShadowSpread,boxShadowColor0:this.boxShadowColor[0],boxShadowColor1:this.boxShadowColor[1],boxShadowColor2:this.boxShadowColor[2],opacity:this.opacity,zIndex:this.zIndex});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return d._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%; box-shadow: "+a.boxShadowOffsetX+"px "+a.boxShadowOffsetY+"px "+a.boxShadowBlur+"px "+a.boxShadowSpread+"px "+a.colorMode+"("+a.boxShadowColor0+", "+a.boxShadowColor1+("hsl"===a.colorMode?"%":"")+", "+a.boxShadowColor2+("hsl"===a.colorMode?"%":"")+"); opacity: "+a.opacity+"; z-index: "+a.zIndex+";"},b.exports.Attractor=c},{"./Mover":15,Burner:8}],11:[function(a,b){function c(a){this._borders=[],this.id=a||c._idCount,c._idCount++}var d=a("Burner").Utils;c._idCount=0,c.prototype.name="BorderPalette",c.prototype.addBorder=function(a){if(!a.min||!a.max||!a.style)throw new Error("BorderPalette.addBorder requires min, max and style paramaters.");for(var b=0,c=d.getRandomNumber(a.min,a.max);c>b;b++)this._borders.push(a.style);return this},c.prototype.getBorder=function(){if(this._borders.length>0)return this._borders[d.getRandomNumber(0,this._borders.length-1)];throw new Error("BorderPalette.getBorder: You must add borders via addBorder() before using getBorder().")},b.exports.BorderPalette=c},{Burner:8}],12:[function(a,b){function c(a){this._gradients=[],this._colors=[],this.id=a||c._idCount,c._idCount++}var d=a("Burner").Utils;c._idCount=0,c.prototype.name="ColorPalette",c.prototype.addColor=function(a){if(!(a.min&&a.max&&a.startColor&&a.endColor))throw new Error("ColorPalette.addColor must pass min, max, startColor and endColor options.");var b,e,f;for(e=d.getRandomNumber(a.min,a.max),f=c._createColorRange(a.startColor,a.endColor,255),b=0;e>b;b++)this._colors.push(f[d.getRandomNumber(0,f.length-1)]);return this},c._createColorRange=function(a,b,c){var d,e,f,g,h,i,j,k=[],l=a[0],m=a[1],n=a[2],o=b[0],p=b[1],q=b[2];for(e=o-l,f=p-m,g=q-n,d=0;c>d;d++)h=parseInt(e*d/c,10)+l,i=parseInt(f*d/c,10)+m,j=parseInt(g*d/c,10)+n,k.push([h,i,j]);return k},c.prototype.getColor=function(){if(this._colors.length>0)return this._colors[d.getRandomNumber(0,this._colors.length-1)];throw new Error("ColorPalette.getColor: You must add colors via addColor() before using getColor().")},b.exports.ColorPalette=c},{Burner:8}],13:[function(a,b){function c(a){if(d.call(this),!a||!a.parentA||!a.parentB)throw new Error("Connector: both parentA and parentB are required.");this.parentA=a.parentA,this.parentB=a.parentB,this.name=a.name||"Connector",this.zIndex=a.zIndex||0,this.borderStyle=a.borderStyle||"dotted",this.borderColor=a.borderColor||[150,150,150],this.borderWidth=1,this.borderRadius=0,this.height=0,this.color="transparent"}var d=a("Burner").Item,e=a("Burner").Utils,f=a("Burner").Vector;e.extend(c,d),c.prototype.step=function(){var a=this.parentA.location,b=this.parentB.location;this.width=Math.floor(f.VectorSub(this.parentA.location,this.parentB.location).mag()),this.location=f.VectorAdd(this.parentA.location,this.parentB.location).div(2),this.angle=e.radiansToDegrees(Math.atan2(b.y-a.y,b.x-a.x))},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2]});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return d._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%;"},b.exports.Connector=c},{Burner:8}],14:[function(a,b){function c(a){d.call(this);var b=a||{};this.name=b.name||"Dragger",this.c="undefined"==typeof b.c?1:b.c,this.mass="undefined"==typeof b.mass?1e3:b.mass,this.isStatic="undefined"==typeof b.isStatic?!0:b.isStatic,this.width="undefined"==typeof b.width?100:b.width,this.height="undefined"==typeof b.height?100:b.height,this.color=b.color||[105,210,231],this.borderStyle=b.borderStyle||"double",this.borderColor=b.borderColor||[167,219,216],this.borderRadius="undefined"==typeof b.borderRadius?100:b.borderRadius,this.boxShadowColor=b.boxShadowColor||[147,199,196],this.opacity="undefined"==typeof b.opacity?.75:b.opacity,this.zIndex="undefined"==typeof b.zIndex?1:b.zIndex}{var d=(a("Burner").Item,a("./Attractor").Attractor),e=a("Burner").Utils;a("Burner").Vector}e.extend(c,d),c.prototype.init=function(a,b){c._superClass.init.call(this,a,b);var d=b||{};this.borderWidth="undefined"==typeof d.borderWidth?this.width/4:d.borderWidth,this.boxShadowSpread="undefined"==typeof d.boxShadowSpread?this.width/4:d.boxShadowSpread},c.prototype.drag=function(a){var b=a.velocity.mag(),c=-1*this.c*b*b;return this._force.x=a.velocity.x,this._force.y=a.velocity.y,this._force.normalize(),this._force.mult(c),this._force},b.exports.Dragger=c},{"./Attractor":10,Burner:8}],15:[function(a,b){function c(a){d.call(this);var b=a||{};this.name=b.name||"Mover",this.color=b.color||[255,255,255],this.borderRadius=b.borderRadius||0,this.borderWidth=b.borderWidth||0,this.borderStyle=b.borderStyle||"none",this.borderColor=b.borderColor||[0,0,0],this.pointToDirection="undefined"==typeof b.pointToDirection?!0:b.pointToDirection,this.draggable=!!b.draggable,this.parent=b.parent||null,this.pointToParentDirection="undefined"==typeof b.pointToParentDirection?!0:b.pointToParentDirection,this.offsetDistance="undefined"==typeof b.offsetDistance?0:b.offsetDistance,this.offsetAngle=b.offsetAngle||0,this.isStatic=!!b.isStatic}var d=a("Burner").Item,e=a("Burner").System,f=a("Burner").Utils,g=a("Burner").Vector;f.extend(c,d),c.prototype.init=function(a,b){c._superClass.init.call(this,a,b);var d=this;this.isMouseOut=!1,this.isPressed=!1,this.mouseOutInterval=!1,this._friction=new g,this.draggable&&(f.addEvent(this.el,"mouseover",function(){return function(a){c.mouseover.call(d,a)}}()),f.addEvent(this.el,"mousedown",function(){return function(a){c.mousedown.call(d,a)}}()),f.addEvent(this.el,"mousemove",function(){return function(a){c.mousemove.call(d,a)}}()),f.addEvent(this.el,"mouseup",function(){return function(a){c.mouseup.call(d,a)}}()),f.addEvent(this.el,"mouseout",function(){return function(a){c.mouseout.call(d,a)}}()))},c.mouseover=function(){this.isMouseOut=!1,clearInterval(this.mouseOutInterval)},c.mousedown=function(){this.isPressed=!0,this.isMouseOut=!1},c.mousemove=function(a){var b,c;this.isPressed&&(this.isMouseOut=!1,a.pageX&&a.pageY?(b=a.pageX-this.world.el.offsetLeft,c=a.pageY-this.world.el.offsetTop):a.clientX&&a.clientY&&(b=a.clientX-this.world.el.offsetLeft,c=a.clientY-this.world.el.offsetTop),b&c&&(this.location=new g(b,c)),this._checkWorldEdges())},c.mouseup=function(){this.isPressed=!1},c.mouseout=function(){var a,b,c=this,d=e.mouse;this.isPressed&&(this.isMouseOut=!0,this.mouseOutInterval=setInterval(function(){c.isPressed&&c.isMouseOut&&(a=d.location.x-c.world.el.offsetLeft,b=d.location.y-c.world.el.offsetTop,c.location=new g(a,b))},16))},c.prototype.step=function(){var a,b,c=this.location.x,d=this.location.y;if(this.beforeStep.call(this),!this.isStatic&&!this.isPressed){this.world.c&&(this._friction.x=this.velocity.x,this._friction.y=this.velocity.y,this._friction.mult(-1),this._friction.normalize(),this._friction.mult(this.world.c),this.applyForce(this._friction)),this.applyForce(this.world.gravity);var h=e.getAllItemsByName("Attractor");for(a=0,b=h.length;b>a;a+=1)this.id!==h[a].id&&this.applyForce(h[a].attract(this));var i=e.getAllItemsByName("Repeller");for(a=0,b=i.length;b>a;a+=1)this.id!==i[a].id&&this.applyForce(i[a].attract(this));
var j=e.getAllItemsByName("Dragger");for(a=0,b=j.length;b>a;a+=1)this.id!==j[a].id&&f.isInside(this,j[a])&&this.applyForce(j[a].drag(this));if(this.applyAdditionalForces&&this.applyAdditionalForces.call(this),this.velocity.add(this.acceleration),this.velocity.limit(this.maxSpeed,this.minSpeed),this.location.add(this.velocity),this.pointToDirection&&this.velocity.mag()>.1&&(this.angle=f.radiansToDegrees(Math.atan2(this.velocity.y,this.velocity.x))),this.wrapWorldEdges?this._wrapWorldEdges():this.checkWorldEdges&&this._checkWorldEdges(),this.controlCamera&&this._checkCameraEdges(c,d,this.location.x,this.location.y),this.parent&&(this.offsetDistance?(r=this.offsetDistance,theta=f.degreesToRadians(this.parent.angle+this.offsetAngle),c=r*Math.cos(theta),d=r*Math.sin(theta),this.location.x=this.parent.location.x,this.location.y=this.parent.location.y,this.location.add(new g(c,d)),this.pointToParentDirection&&(this.angle=f.radiansToDegrees(Math.atan2(this.parent.velocity.y,this.parent.velocity.x)))):(this.location.x=this.parent.location.x,this.location.y=this.parent.location.y)),this.acceleration.mult(0),this.life<this.lifespan)this.life+=1;else if(-1!==this.lifespan)return void e.remove(this);this.afterStep.call(this)}},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,colorMode:this.colorMode,color0:this.color[0],color1:this.color[1],color2:this.color[2],opacity:this.opacity,zIndex:this.zIndex,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2]});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return d._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+");  opacity: "+a.opacity+"; z-index: "+a.zIndex+"; border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%;"},b.exports.Mover=c},{Burner:8}],16:[function(a,b){function c(a){d.call(this);var b=a||{};this.name=b.name||"Oscillator",this.acceleration=b.acceleration||new h(.01,0),this.aVelocity=b.aVelocity||new h,this.isStatic=!!b.isStatic,this.isPerlin=!!b.isPerlin,this.perlinSpeed="undefined"==typeof b.perlinSpeed?.005:b.perlinSpeed,this.perlinTime=b.perlinTime||0,this.perlinAccelLow="undefined"==typeof b.perlinAccelLow?-2:b.perlinAccelLow,this.perlinAccelHigh="undefined"==typeof b.perlinAccelHigh?2:b.perlinAccelHigh,this.perlinOffsetX="undefined"==typeof b.perlinOffsetX?1e4*Math.random():b.perlinOffsetX,this.perlinOffsetY="undefined"==typeof b.perlinOffsetY?1e4*Math.random():b.perlinOffsetY,this.width="undefined"==typeof b.width?20:b.width,this.height="undefined"==typeof b.height?20:b.height,this.color=b.color||[200,100,0],this.borderWidth=b.borderWidth||0,this.borderStyle=b.borderStyle||"solid",this.borderColor=b.borderColor||[255,150,50],this.borderRadius="undefined"==typeof b.borderRadius?100:b.borderRadius,this.boxShadowOffsetX=b.boxShadowOffsetX||0,this.boxShadowOffsetY=b.boxShadowOffsetY||0,this.boxShadowBlur=b.boxShadowBlur||0,this.boxShadowSpread=b.boxShadowSpread||0,this.boxShadowColor=b.boxShadowColor||[200,100,0],this.opacity="undefined"==typeof b.opacity?.75:b.opacity,this.zIndex="undefined"==typeof b.zIndex?1:b.zIndex,this.parent=b.parent||null,this.pointToDirection=!!b.pointToDirection,this.initialLocation=new h,this.lastLocation=new h,this.amplitude=new h}var d=a("Burner").Item,e=(a("./Mover").Mover,a("./SimplexNoise").SimplexNoise),f=a("Burner").System,g=a("Burner").Utils,h=a("Burner").Vector;g.extend(c,d),c.prototype.init=function(a,b){c._superClass.init.call(this,a,b);var d=b||{};this.amplitude=d.amplitude||new h(this.world.width/2-this.width,this.world.height/2-this.height),this.initialLocation=d.initialLocation||new h(this.world.width/2,this.world.height/2),this.location.x=this.initialLocation.x,this.location.y=this.initialLocation.y},c.prototype.step=function(){this.beforeStep.call(this),this.isStatic||(this.isPerlin?(this.perlinTime+=this.perlinSpeed,this.aVelocity.x=g.map(e.noise(this.perlinTime+this.perlinOffsetX,0),-1,1,this.perlinAccelLow,this.perlinAccelHigh),this.aVelocity.y=g.map(e.noise(0,this.perlinTime+this.perlinOffsetY),-1,1,this.perlinAccelLow,this.perlinAccelHigh)):this.aVelocity.add(this.acceleration),this.parent&&(this.initialLocation.x=this.parent.location.x,this.initialLocation.y=this.parent.location.y),this.location.x=this.initialLocation.x+Math.sin(this.aVelocity.x)*this.amplitude.x,this.location.y=this.initialLocation.y+Math.sin(this.aVelocity.y)*this.amplitude.y,this.pointToDirection&&(velDiff=h.VectorSub(this.location,this.lastLocation),this.angle=g.radiansToDegrees(Math.atan2(velDiff.y,velDiff.x))),this.life<this.lifespan?this.life+=1:-1!==this.lifespan&&f.remove(this),this.afterStep.call(this),this.lastLocation.x=this.location.x,this.lastLocation.y=this.location.y)},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2],boxShadowOffsetX:this.boxShadowOffsetX,boxShadowOffsetY:this.boxShadowOffsetY,boxShadowBlur:this.boxShadowBlur,boxShadowSpread:this.boxShadowSpread,boxShadowColor0:this.boxShadowColor[0],boxShadowColor1:this.boxShadowColor[1],boxShadowColor2:this.boxShadowColor[2],opacity:this.opacity,zIndex:this.zIndex});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return d._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%; box-shadow: "+a.boxShadowOffsetX+"px "+a.boxShadowOffsetY+"px "+a.boxShadowBlur+"px "+a.boxShadowSpread+"px "+a.colorMode+"("+a.boxShadowColor0+", "+a.boxShadowColor1+("hsl"===a.colorMode?"%":"")+", "+a.boxShadowColor2+("hsl"===a.colorMode?"%":"")+"); opacity: "+a.opacity+"; z-index: "+a.zIndex+";"},b.exports.Oscillator=c},{"./Mover":15,"./SimplexNoise":22,Burner:8}],17:[function(a,b){function c(a){e.call(this);var b=a||{};this.name=b.name||"Particle",this.width="undefined"==typeof b.width?20:b.width,this.height="undefined"==typeof b.height?20:b.height,this.color=b.color||[200,200,200],this.borderRadius="undefined"==typeof b.borderRadius?100:b.borderRadius,this.lifespan="undefined"==typeof b.lifespan?50:b.lifespan,this.life=b.life||0,this.fade="undefined"==typeof b.fade?!0:b.fade,this.shrink="undefined"==typeof b.shrink?!0:b.shrink,this.checkWorldEdges=!!b.checkWorldEdges,this.maxSpeed="undefined"==typeof b.maxSpeed?4:b.maxSpeed,this.zIndex="undefined"==typeof b.zIndex?1:b.zIndex}var d=a("Burner").Item,e=a("./Mover").Mover,f=a("Burner").Utils,g=a("Burner").Vector;f.extend(c,e),c.prototype.init=function(a,b){c._superClass.init.call(this,a,b);var d=b||{};this.borderWidth="undefined"==typeof d.borderWidth?this.width/4:d.borderWidth,this.boxShadowSpread="undefined"==typeof d.boxShadowSpread?this.width/4:d.boxShadowSpread,d.acceleration||(this.acceleration=new g(1,1),this.acceleration.normalize(),this.acceleration.mult(this.maxSpeed?this.maxSpeed:3),this.acceleration.rotate(f.getRandomNumber(0,2*Math.PI,!0))),d.velocity||(this.velocity=new g),this.initWidth=this.width,this.initHeight=this.height},c.prototype.afterStep=function(){this.fade&&(this.opacity=f.map(this.life,0,this.lifespan,1,0)),this.shrink&&(this.width=f.map(this.life,0,this.lifespan,this.initWidth,0),this.height=f.map(this.life,0,this.lifespan,this.initHeight,0))},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2],boxShadowOffsetX:this.boxShadowOffsetX,boxShadowOffsetY:this.boxShadowOffsetY,boxShadowBlur:this.boxShadowBlur,boxShadowSpread:this.boxShadowSpread,boxShadowColor0:this.boxShadowColor[0],boxShadowColor1:this.boxShadowColor[1],boxShadowColor2:this.boxShadowColor[2],opacity:this.opacity,zIndex:this.zIndex});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return d._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%; box-shadow: "+a.boxShadowOffsetX+"px "+a.boxShadowOffsetY+"px "+a.boxShadowBlur+"px "+a.boxShadowSpread+"px "+a.colorMode+"("+a.boxShadowColor0+", "+a.boxShadowColor1+("hsl"===a.colorMode?"%":"")+", "+a.boxShadowColor2+("hsl"===a.colorMode?"%":"")+"); opacity: "+a.opacity+"; z-index: "+a.zIndex+";"},b.exports.Particle=c},{"./Mover":15,Burner:8}],18:[function(a,b){function c(a){f.call(this);var b=a||{};this.name=b.name||"ParticleSystem",this.width=b.width||0,this.height=b.height||0,this.color=b.color||[255,255,255],this.borderWidth=b.borderWidth||0,this.borderStyle=b.borderStyle||"none",this.borderColor=b.borderColor||[255,255,255],this.borderRadius=b.borderRadius||0,this.isStatic="undefined"==typeof b.isStatic?!0:b.isStatic,this.lifespan="undefined"==typeof b.lifespan?-1:b.lifespan,this.life="undefined"==typeof b.life?-1:b.life,this.burst="undefined"==typeof b.burst?1:b.burst,this.burstRate="undefined"==typeof b.burstRate?4:b.burstRate,this.emitRadius="undefined"==typeof b.emitRadius?3:b.emitRadius,this.startColor=b.startColor||[255,255,255],this.endColor=b.endColor||[255,0,0],this.particleOptions=b.particleOptions||{width:15,height:15,lifespan:50,borderRadius:100,checkWorldEdges:!1,acceleration:null,velocity:null,location:null,maxSpeed:3,fade:!0,shrink:!0}}var d=a("./ColorPalette").ColorPalette,e=a("Burner").Item,f=a("./Mover").Mover,g=a("Burner").System,h=a("Burner").Utils,i=a("Burner").Vector;h.extend(c,f),c.prototype.init=function(a,b){c._superClass.init.call(this,a,b);this.particleOptions.acceleration&&(this.initParticleAcceleration=new i(this.particleOptions.acceleration.x,this.particleOptions.acceleration.y));var e=new d;e.addColor({min:12,max:24,startColor:this.startColor,endColor:this.endColor}),this.clock=0,this.beforeStep=function(){var a,b,c=this.initParticleAcceleration;if(this.life<this.lifespan)this.life+=1;else if(-1!==this.lifespan)return void g.remove(this);if(this.clock%this.burstRate===0){a=new i(this.location.x,this.location.y),b=new i(1,1),b.normalize(),b.mult(this.emitRadius),b.rotate(h.getRandomNumber(0,2*Math.PI,!0)),a.add(b);for(var d=0;d<this.burst;d++)this.particleOptions.world=this.world,this.particleOptions.life=0,this.particleOptions.color=e.getColor(),this.particleOptions.borderStyle="solid",this.particleOptions.borderColor=e.getColor(),this.particleOptions.boxShadowColor=e.getColor(),c&&(this.particleOptions.acceleration=new i(c.x,c.y)),this.particleOptions.location=a,g.add("Particle",this.particleOptions)}this.clock++}},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return e._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+";"},b.exports.ParticleSystem=c},{"./ColorPalette":12,"./Mover":15,Burner:8}],19:[function(a,b){function c(a){d.call(this);var b=a||{};this.name=b.name||"Point",this.color=b.color||[200,200,200],this.borderRadius="undefined"==typeof b.borderRadius?100:b.borderRadius,this.borderWidth="undefined"==typeof b.borderWidth?2:b.borderWidth,this.borderStyle=b.borderStyle||"solid",this.borderColor=b.borderColor||[60,60,60],this.isStatic=!0}var d=a("Burner").Item,e=a("Burner").Utils;e.extend(c,d),c.prototype.step=function(){},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2]});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return d._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%;"},b.exports.Point=c},{Burner:8}],20:[function(a,b){function c(a){d.call(this);var b=a||{};this.name=b.name||"Repeller",this.G="undefined"==typeof b.G?-10:b.G,this.mass="undefined"==typeof b.mass?1e3:b.mass,this.isStatic="undefined"==typeof b.isStatic?!0:b.isStatic,this.width="undefined"==typeof b.width?100:b.width,this.height="undefined"==typeof b.height?100:b.height,this.color=b.color||[250,105,0],this.borderStyle=b.borderStyle||"double",this.borderColor=b.borderColor||[224,228,204],this.borderRadius="undefined"==typeof b.borderRadius?100:b.borderRadius,this.boxShadowColor=b.boxShadowColor||[250,105,0],this.opacity="undefined"==typeof b.opacity?.75:b.opacity,this.zIndex="undefined"==typeof b.zIndex?1:b.zIndex}{var d=(a("Burner").Item,a("./Attractor").Attractor),e=a("Burner").Utils;a("Burner").Vector}e.extend(c,d),c.prototype.init=function(a,b){c._superClass.init.call(this,a,b);var d=b||{};this.borderWidth="undefined"==typeof d.borderWidth?this.width/4:d.borderWidth,this.boxShadowSpread="undefined"==typeof d.boxShadowSpread?this.width/4:d.boxShadowSpread},b.exports.Repeller=c},{"./Attractor":10,Burner:8}],21:[function(a,b){function c(a){d.call(this);var b=a||{};this.name=b.name||"Sensor",this.type=b.type||"",this.behavior=b.behavior||function(){},this.sensitivity="undefined"!=typeof b.sensitivity?b.sensitivity:200,this.width="undefined"!=typeof b.width?b.width:7,this.height="undefined"!=typeof b.height?b.height:7,this.offsetDistance="undefined"!=typeof b.offsetDistance?b.offsetDistance:30,this.offsetAngle=b.offsetAngle||0,this.opacity="undefined"!=typeof b.opacity?b.opacity:.75,this.target=b.target||null,this.activated=!!b.activated,this.activatedColor=b.activatedColor||[255,255,255],this.borderRadius="undefined"!=typeof b.borderRadius?b.borderRadius:100,this.borderWidth="undefined"!=typeof b.borderWidth?b.borderWidth:2,this.borderStyle=b.borderStyle||"solid",this.borderColor=b.borderColor||[255,255,255],this.onConsume=b.onConsume||null}var d=(a("Burner").Item,a("./Mover").Mover),e=a("Burner").System,f=a("Burner").Utils,g=a("Burner").Vector;f.extend(c,d),c.prototype.init=function(a,b){c._superClass.init.call(this,a,b);var d=b||{};this.displayRange=!!d.displayRange,this.displayConnector=!!d.displayConnector,this.activationLocation=new g,this._force=new g},c.prototype.step=function(){for(var a=!1,b=e.getAllItemsByName(this.type),c=0,d=b.length;d>c;c++)this.sensorActive(b[c],this.sensitivity)&&(this.target=b[c],this.activationLocation.x||this.activationLocation.y||(this.activationLocation.x=this.parent.location.x,this.activationLocation.y=this.parent.location.y),this.activated=!0,this.activatedColor=this.target.color,this.displayConnector&&!this.connector&&(this.connector=e.add("Connector",{parentA:this,parentB:this.target})),this.displayConnector&&this.connector&&this.connector.parentB!==this.target&&(this.connector.parentB=this.target),a=!0);a?this.color=this.activatedColor:(this.target=null,this.activated=!1,this.state=null,this.color=[255,255,255],this.activationLocation.x=null,this.activationLocation.y=null,this.connector&&(e.remove(this.connector),this.connector=null)),this.afterStep.call(this)},c.prototype.sensorActive=function(a){console.log("sensorActive"),console.log(a);var b=g.VectorDistance(this.location,a.location),c=this.sensitivity/2,d=a.width/2+a.boxShadowSpread;return console.log(b),c+d>b},b.exports.Sensor=c},{"./Mover":15,Burner:8}],22:[function(a,b){var c={};c.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],c.p=[],c.perm=[],c.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]],c.config=function(a){var b,d=c.p,e=c.perm;for("undefined"==typeof a&&(a=Math),b=0;256>b;b+=1)c.p[b]=Math.floor(256*a.random());for(b=0;512>b;b+=1)e[b]=d[255&b]},c.noise=function(a,b){{var d=(c.grad3,c.p);c.perm,c.simplex}d.length||c.config();var e,f,g,h,i,j=.5*(Math.sqrt(3)-1),k=(a+b)*j,l=Math.floor(a+k),m=Math.floor(b+k),n=(3-Math.sqrt(3))/6,o=(l+m)*n,p=l-o,q=m-o,r=a-p,s=b-q;r>s?(h=1,i=0):(h=0,i=1);var t=r-h+n,u=s-i+n,v=r-1+2*n,w=s-1+2*n,x=255&l,y=255&m,z=this.perm[x+this.perm[y]]%12,A=this.perm[x+h+this.perm[y+i]]%12,B=this.perm[x+1+this.perm[y+1]]%12,C=.5-r*r-s*s;0>C?e=0:(C*=C,e=C*C*this.dot(this.grad3[z],r,s));var D=.5-t*t-u*u;0>D?f=0:(D*=D,f=D*D*this.dot(this.grad3[A],t,u));var E=.5-v*v-w*w;return 0>E?g=0:(E*=E,g=E*E*this.dot(this.grad3[B],v,w)),70*(e+f+g)},c.dot=function(a,b,c){return a[0]*b+a[1]*c},b.exports.SimplexNoise=c},{}],23:[function(a,b){function c(a){g.call(this);var b=a||{};if(!b.type||"string"!=typeof b.type)throw new Error('Stimulus requires "type" parameter as a string.');this.type=b.type,this.name=this.type,this.mass="undefined"!=typeof b.mass?b.mass:50,this.isStatic="undefined"!=typeof b.isStatic?b.isStatic:!0,this.width="undefined"!=typeof b.width?b.width:50,this.height="undefined"!=typeof b.height?b.height:50,this.opacity="undefined"!=typeof b.opacity?b.opacity:.75}var d=a("./BorderPalette").BorderPalette,e=a("./ColorPalette").ColorPalette,f=a("./config").config,g=a("./Mover").Mover,h=a("Burner").Utils;h.extend(c,g);var i,j,k,l,m;for(c.borderStyles=["double","double","dotted","dashed"],c.palettes={},c.borderColors={},c.boxShadowColors={},i=0,j=f.defaultColorList.length;j>i;i++)l=f.defaultColorList[i],k=new e,k.addColor({min:20,max:200,startColor:l.startColor,endColor:l.endColor}),c.palettes[l.name]=k,c.borderColors[l.name]=l.borderColor,c.boxShadowColors[l.name]=l.boxShadowColor;for(c.borderPalette=new d,i=0,j=c.borderStyles.length;j>i;i++)m=c.borderStyles[i],c.borderPalette.addBorder({min:2,max:10,style:m});c.prototype.init=function(a,b){c._superClass.init.call(this,a,b),this.color=b.color||(c.palettes[this.type]?c.palettes[this.type].getColor():[255,255,255]),this.borderColor=b.borderColor||(c.palettes[this.type]?c.palettes[this.type].getColor():[220,220,220]),this.boxShadowColor=b.boxShadowColor||(c.boxShadowColors[this.type]?c.boxShadowColors[this.type]:[200,200,200]),this.borderWidth="undefined"!=typeof b.borderWidth?b.borderWidth:this.width/h.getRandomNumber(2,8),this.borderStyle="undefined"!=typeof b.borderStyle?b.borderStyle:c.borderPalette.getBorder(),this.borderRadius="undefined"!=typeof b.borderRadius?b.borderRadius:100,this.boxShadowSpread="undefined"!=typeof b.boxShadowSpread?b.boxShadowSpread:this.width/h.getRandomNumber(2,8)},b.exports.Stimulus=c},{"./BorderPalette":11,"./ColorPalette":12,"./Mover":15,"./config":25,Burner:8}],24:[function(a,b){function c(a){d.call(this);var b=a||{};this.name=b.name||"Walker",this.width="undefined"==typeof b.width?10:b.width,this.height="undefined"==typeof b.height?10:b.height,this.remainsOnScreen=!!b.remainsOnScreen,this.maxSpeed="undefined"==typeof b.maxSpeed?1:b.maxSpeed,this.perlin="undefined"==typeof b.perlin?!0:b.perlin,this.perlinSpeed="undefined"==typeof b.perlinSpeed?.005:b.perlinSpeed,this.perlinTime=b.perlinTime||0,this.perlinAccelLow="undefined"==typeof b.perlinAccelLow?-.075:b.perlinAccelLow,this.perlinAccelHigh="undefined"==typeof b.perlinAccelHigh?.075:b.perlinAccelHigh,this.perlinOffsetX="undefined"==typeof b.perlinOffsetX?1e4*Math.random():b.perlinOffsetX,this.perlinOffsetY="undefined"==typeof b.perlinOffsetY?1e4*Math.random():b.perlinOffsetY,this.color=b.color||[255,150,50],this.borderWidth="undefined"==typeof b.borderWidth?0:b.borderWidth,this.borderStyle=b.borderStyle||"none",this.borderColor=b.borderColor||[255,255,255],this.borderRadius="undefined"==typeof b.borderRadius?100:b.borderRadius,this.opacity="undefined"==typeof b.opacity?1:b.opacity,this.zIndex="undefined"==typeof b.zIndex?0:b.zIndex,this._randomVector=new g}var d=a("./Mover").Mover,e=a("./SimplexNoise").SimplexNoise,f=a("Burner").Utils,g=a("Burner").Vector;f.extend(c,d),c.prototype.init=function(a,b){c._superClass.init.call(this,a,b)},c.prototype.applyAdditionalForces=function(){return this.perlin?(this.perlinTime+=this.perlinSpeed,void(this.remainsOnScreen?(this.acceleration=new g,this.velocity=new g,this.location.x=f.map(e.noise(this.perlinTime+this.perlinOffsetX,0),-1,1,0,this.world.width),this.location.y=f.map(e.noise(0,this.perlinTime+this.perlinOffsetY),-1,1,0,this.world.height)):(this.acceleration.x=f.map(e.noise(this.perlinTime+this.perlinOffsetX,0),-1,1,this.perlinAccelLow,this.perlinAccelHigh),this.acceleration.y=f.map(e.noise(0,this.perlinTime+this.perlinOffsetY),-1,1,this.perlinAccelLow,this.perlinAccelHigh)))):(this._randomVector.x=1,this._randomVector.y=1,this._randomVector.normalize(),this._randomVector.rotate(f.degreesToRadians(f.getRandomNumber(0,359))),this._randomVector.mult(this.maxSpeed),void this.applyForce(this._randomVector))},b.exports.Walker=c},{"./Mover":15,"./SimplexNoise":22,Burner:8}],25:[function(a,b){var c={borderStyles:["none","solid","dotted","dashed","double","inset","outset","groove","ridge"],defaultColorList:[{name:"cold",startColor:[88,129,135],endColor:[171,244,255],boxShadowColor:[132,192,201]},{name:"food",startColor:[186,255,130],endColor:[84,187,0],boxShadowColor:[57,128,0]},{name:"heat",startColor:[255,132,86],endColor:[175,47,0],boxShadowColor:[255,69,0]},{name:"light",startColor:[255,255,255],endColor:[189,148,0],boxShadowColor:[255,200,0]},{name:"oxygen",startColor:[130,136,255],endColor:[49,56,205],boxShadowColor:[60,64,140]}],keyMap:{pause:80,resetSystem:82,stats:83},touchMap:{stats:2,pause:3,reset:4}};b.exports.config=c},{}]},{},[1])(1)});
//# sourceMappingURL=Flora.min.js.map