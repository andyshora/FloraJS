/*! Flora v3.0.0 - 2014-07-02 08:07:24 
Vince Allen |Brooklyn, NY | vince@vinceallen.com | @vinceallenvince | License: MIT */

!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Flora=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c={System:a("Burner").System};c.System.Classes={Point:a("./src/Point").Point},b.exports=c},{"./src/Point":3,Burner:2}],2:[function(b,c,d){(function(e){!function(b){if("object"==typeof d)c.exports=b();else if("function"==typeof a&&a.amd)a(b);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof e?f=e:"undefined"!=typeof self&&(f=self),f.Burner=b()}}(function(){return function a(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof b&&b;if(!i&&j)return j(h,!0);if(g)return g(h,!0);throw new Error("Cannot find module '"+h+"'")}var k=d[h]={exports:{}};c[h][0].call(k.exports,function(a){var b=c[h][1][a];return f(b?b:a)},k,k.exports,a,c,d,e)}return d[h].exports}for(var g="function"==typeof b&&b,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b){b.exports={Item:a("./src/Item").Item,System:a("./src/System").System,Utils:a("./src/Utils").Utils,Vector:a("./src/Vector").Vector,World:a("./src/World").World}},{"./src/Item":2,"./src/System":4,"./src/Utils":5,"./src/Vector":6,"./src/World":7}],2:[function(a,b){function c(){c._idCount++}var d=a("./Vector").Vector;c._idCount=0,c._stylePosition="transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -webkit-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -moz-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -o-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -ms-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>);",c.prototype.init=function(a,b){if(!a||"object"!=typeof a)throw new Error("Item requires an instance of World.");this.world=a;var e=b||{};this.name="undefined"!=typeof this.name?this.name:e.name||"Item",this.width="undefined"!=typeof this.width?this.width:"undefined"==typeof e.width?10:e.width,this.height="undefined"!=typeof this.height?this.height:"undefined"==typeof e.height?10:e.height,this.scale="undefined"!=typeof this.scale?this.scale:e.scale||1,this.angle="undefined"!=typeof this.angle?this.angle:e.angle||0,this.color="undefined"!=typeof this.color?this.color:e.color||[0,0,0],this.mass="undefined"!=typeof this.mass?this.mass:"undefined"==typeof e.mass?10:e.mass,this.acceleration="undefined"!=typeof this.acceleration?this.acceleration:e.acceleration||new d,this.velocity="undefined"!=typeof this.velocity?this.velocity:e.velocity||new d,this.location="undefined"!=typeof this.location?this.location:e.location||new d(this.world.width/2,this.world.height/2),this.maxSpeed="undefined"!=typeof this.maxSpeed?this.maxSpeed:"undefined"==typeof e.maxSpeed?10:e.maxSpeed,this.minSpeed="undefined"!=typeof this.minSpeed?this.minSpeed:e.minSpeed||0,this.bounciness="undefined"!=typeof this.bounciness?this.bounciness:e.bounciness||.5,this.checkWorldEdges="undefined"!=typeof this.checkWorldEdges?this.checkWorldEdges:"undefined"==typeof e.checkWorldEdges?!0:e.checkWorldEdges,this.wrapWorldEdges="undefined"!=typeof this.wrapWorldEdges?this.wrapWorldEdges:e.wrapWorldEdges||!1,this.beforeStep="undefined"!=typeof this.beforeStep?this.beforeStep:e.beforeStep||function(){},this._force=this._force||new d,this.id=this.name+c._idCount,this.el||(this.el=document.createElement("div"),this.el.id=this.id,this.el.className="item "+this.name.toLowerCase(),this.el.style.position="absolute",this.el.style.top="-5000px",this.world.add(this.el))},c.prototype.step=function(){this.beforeStep.call(this),this.applyForce(this.world.gravity),this.applyForce(this.world.wind),this.velocity.add(this.acceleration),this.velocity.limit(this.maxSpeed,this.minSpeed),this.location.add(this.velocity),this.checkWorldEdges?this._checkWorldEdges():this.wrapWorldEdges&&this._wrapWorldEdges(),this.acceleration.mult(0)},c.prototype.applyForce=function(a){return a?(this._force.x=a.x,this._force.y=a.y,this._force.div(this.mass),this.acceleration.add(this._force),this.acceleration):void 0},c.prototype._checkWorldEdges=function(){var a=this.world.width,b=this.world.height,c=this.location,d=this.velocity,e=this.width*this.scale,f=this.height*this.scale,g=this.bounciness;c.x+e/2>a?(c.x=a-e/2,d.x*=-1*g):c.x<e/2&&(c.x=e/2,d.x*=-1*g),c.y+f/2>b?(c.y=b-f/2,d.y*=-1*g):c.y<f/2&&(c.y=f/2,d.y*=-1*g)},c.prototype._wrapWorldEdges=function(){var a=this.world.width,b=this.world.height,c=this.location,d=this.width*this.scale,e=this.height*this.scale;c.x+d/2>a?c.x=d/2:c.x<d/2&&(c.x=a-d/2),c.y+e/2>b?c.y=e/2:c.y<e/2&&(c.y=b-e/2)},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2]});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return c._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: rgb("+a.color0+", "+a.color1+", "+a.color2+")"},b.exports.Item=c},{"./Vector":6}],3:[function(a,b){function c(){}c.name="StatsDisplay",c.active=!1,c.fps=!1,c._time=Date.now(),c._timeLastFrame=c._time,c._timeLastSecond=c._time,c._frameCount=0,c.init=function(){c.active=!0,c.el=document.createElement("div"),c.el.id="statsDisplay",c.el.className="statsDisplay",c.el.style.backgroundColor="black",c.el.style.color="white",c.el.style.fontFamily="Helvetica",c.el.style.padding="0.5em",c.el.style.opacity="0.5";var a=document.createElement("span");a.className="statsDisplayLabel",a.style.marginLeft="0.5em",b=document.createTextNode("total elements: "),a.appendChild(b),c.el.appendChild(a),c.totalElementsValue=document.createTextNode("0"),c.el.appendChild(c.totalElementsValue),a=document.createElement("span"),a.className="statsDisplayLabel",a.style.marginLeft="0.5em";var b=document.createTextNode("fps: ");a.appendChild(b),c.el.appendChild(a),c.fpsValue=document.createTextNode("0"),c.el.appendChild(c.fpsValue),document.body.appendChild(c.el)},c.update=function(a){var b=c,d=a||0;b._time=Date.now(),b._frameCount++,b._time>b._timeLastSecond+1e3&&(b.fps=b._frameCount,b._timeLastSecond=b._time,b._frameCount=0,b.fpsValue.nodeValue=b.fps,b.totalElementsValue.nodeValue=d)},c.hide=function(){var a=document.getElementById(c.el.id);a.style.display="none"},c.show=function(){var a=document.getElementById(c.el.id);a.style.display="block"},b.exports.StatsDisplay=c},{}],4:[function(a,b){var c=a("./Item").Item,d=a("./World").World,e=a("./Vector").Vector,f=a("./Utils").Utils,g=a("./StatsDisplay").StatsDisplay;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var h={name:"System"};h.Classes={Item:c},h.gravity=new e(0,1),h.wind=new e,h._records=[],h._pool=[],h.mouse={location:new e,lastLocation:new e,velocity:new e},h._statsDisplay=null,h.setup=function(a,b){var c,e,g,i=b||new d(document.body),j=a||function(){};if("[object Array]"===Object.prototype.toString.call(i))for(e=i.length,c=0,g=e;g>c;c++)h._addWorld(i[c]);else h._addWorld(i);for(e=h._records.length,c=0,g=e;g>c;c++)h._records[c].init();document.body.onorientationchange=h.updateOrientation,f.addEvent(document,"mousemove",h._recordMouseLoc),f.addEvent(window,"touchstart",h._recordMouseLoc),f.addEvent(window,"touchmove",h._recordMouseLoc),f.addEvent(window,"touchend",h._recordMouseLoc),f.addEvent(window,"keyup",h._keyup),h.setupFunc=j,h.setupFunc.call(this)},h.init=function(a,b){h.setup(a,b)},h._addWorld=function(a){h._records.push(a)},h.add=function(a,b,d){var e=this._records,f=b||{},g=d||h._records[0];return f.name=a,h._pool.length?e[e.length]=h._cleanObj(h._pool.splice(0,1)[0]):e.push(h.Classes[a]?new h.Classes[a](f):new c),e[e.length-1].init(g,f),e[e.length-1]},h._cleanObj=function(a){for(var b in a)a.hasOwnProperty(b)&&delete a[b];return a},h.remove=function(a){var b,c,d=h._records;for(b=0,c=d.length;c>b;b++)if(d[b].id===a.id){d[b].el.style.visibility="hidden",h._pool[h._pool.length]=d.splice(b,1)[0];break}},h.destroy=function(a){h.remove(a)},h.loop=function(){var a,b=h._records,c=h._records.length;for(a=c-1;a>=0;a-=1)b[a].step&&!b[a].world.pauseStep&&b[a].step();for(c=h._records.length,a=c-1;a>=0;a-=1)b[a].draw();g.active&&g.update(c),"undefined"!=typeof window.requestAnimationFrame&&window.requestAnimationFrame(h.loop)},h._stepForward=function(){var a,b,c,d,e=h._records,f=h.allWorlds();for(a=0,c=f.length;c>a;a++){for(d=f[a],d.pauseStep=!0,b=e.length-1;b>=0;b-=1)e[b].step&&e[b].step();for(b=e.length-1;b>=0;b-=1)e[b].draw&&e[b].draw()}},h._resetSystem=function(){},h._recordMouseLoc=function(a){var b,c=h.firstWorld();h.mouse.lastLocation.x=h.mouse.location.x,h.mouse.lastLocation.y=h.mouse.location.y,a.changedTouches&&(b=a.changedTouches[0]),a.pageX&&a.pageY?(h.mouse.location.x=f.map(a.pageX,0,window.innerWidth,0,c.width),h.mouse.location.y=f.map(a.pageY,0,window.innerHeight,0,c.height)):a.clientX&&a.clientY?(h.mouse.location.x=f.map(a.clientX,0,window.innerWidth,0,c.width),h.mouse.location.y=f.map(a.clientY,0,window.innerHeight,0,c.height)):b&&(h.mouse.location.x=b.pageX,h.mouse.location.y=b.pageY),h.mouse.velocity.x=h.mouse.lastLocation.x-h.mouse.location.x,h.mouse.velocity.y=h.mouse.lastLocation.y-h.mouse.location.y},h.firstWorld=function(){return this._records.length?this._records[0]:null},h.allWorlds=function(){return h.getAllItemsByName("World")},h.getAllItemsByName=function(a,b){var c,d,e=[],f=b||this._records;for(c=0,d=f.length;d>c;c++)f[c].name===a&&(e[e.length]=f[c]);return e},h.updateOrientation=function(){var a,b=h.allWorlds(),c=b.length;for(a=0;c>a;a++)b[a].width=b[a].el.scrollWidth,b[a].height=b[a].el.scrollHeight},h._keyup=function(a){var b,c,d,e=h.allWorlds();switch(a.keyCode){case 39:h._stepForward();break;case 80:for(b=0,c=e.length;c>b;b++)d=e[b],d.pauseStep=!d.pauseStep;break;case 82:h._resetSystem();break;case 83:h._toggleStats()}},h._resetSystem=function(){var a,b,c,d=h.allWorlds();for(a=0,b=d.length;b>a;a++)for(c=d[a],c.pauseStep=!1,c.pauseDraw=!1;c.el.firstChild;)c.el.removeChild(c.el.firstChild);h._records=[],h._pool=[],h.setup(h.setupFunc)},h._toggleStats=function(){g.fps?g.active=!g.active:g.init(),g.active?g.show():g.hide()},b.exports.System=h},{"./Item":2,"./StatsDisplay":3,"./Utils":5,"./Vector":6,"./World":7}],5:[function(a,b){var c={name:"Utils"};c.extend=function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a},c.getRandomNumber=function(a,b,c){return c?Math.random()*(b-(a-1))+a:Math.floor(Math.random()*(b-(a-1)))+a},c.map=function(a,b,c,d,e){var f=(a-b)/(c-b);return f*(e-d)+d},c.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},b.exports.Utils=c},{}],6:[function(a,b){function c(a,b){var c=a||0,d=b||0;this.x=c,this.y=d}c.VectorSub=function(a,b){return new c(a.x-b.x,a.y-b.y)},c.VectorAdd=function(a,b){return new c(a.x+b.x,a.y+b.y)},c.VectorMult=function(a,b){return new c(a.x*b,a.y*b)},c.VectorDiv=function(a,b){return new c(a.x/b,a.y/b)},c.VectorDistance=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},c.VectorMidPoint=function(a,b){return c.VectorAdd(a,b).div(2)},c.VectorAngleBetween=function(a,b){var c=a.dot(b),d=Math.acos(c/(a.mag()*b.mag()));return d},c.prototype.name="Vector",c.prototype.clone=function(){function a(){}return a.prototype=this,new a},c.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},c.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},c.prototype.mult=function(a){return this.x*=a,this.y*=a,this},c.prototype.div=function(a){return this.x=this.x/a,this.y=this.y/a,this},c.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.prototype.limit=function(a,b){var c=a||null,d=b||null;return c&&this.mag()>c&&(this.normalize(),this.mult(c)),d&&this.mag()<d&&(this.normalize(),this.mult(d)),this},c.prototype.normalize=function(){var a=this.mag();return 0!==a?this.div(a):void 0},c.prototype.distance=function(a){return Math.sqrt(Math.pow(a.x-this.x,2)+Math.pow(a.y-this.y,2))},c.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.x,e=this.y;return this.x=d*b-e*c,this.y=d*c+e*b,this},c.prototype.midpoint=function(a){return c.VectorAdd(this,a).div(2)},c.prototype.dot=function(a){return this.x*a.x+this.y*a.y},b.exports.Vector=c},{}],7:[function(a,b){function c(a,b){if(!a||"object"!=typeof a)throw new Error('World: A valid DOM object is required for the new World "el" property.');this.el=a,this.name="World",this.world={},e.call(this)}var d=a("./Vector").Vector,e=a("./Item").Item,f=a("./Utils").Utils;f.extend(c,e),c.prototype.init=function(a){var b=a||{};this.width=b.width||this.el.scrollWidth,this.height=b.height||this.el.scrollHeight,this.gravity=b.gravity||new d(0,1),this.c=b.c||.1,this.pauseStep=!!b.pauseStep,this.pauseDraw=!!b.pauseDraw,this.el.className=this.name.toLowerCase()},c.prototype.add=function(a){this.el.appendChild(a)},c.prototype.step=function(){},c.prototype.draw=function(){},b.exports.World=c},{"./Item":2,"./Utils":5,"./Vector":6}]},{},[1])(1)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b){function c(a){d.call(this);var b=a||{};this.name=b.name||"Point",this.colorMode=b.colorMode||"rgb",this.color=b.color||[200,200,200],this.borderRadius="undefined"==typeof b.borderRadius?100:b.borderRadius,this.borderWidth="undefined"==typeof b.borderWidth?2:b.borderWidth,this.borderStyle=b.borderStyle||"solid",this.borderColor=b.borderColor||[60,60,60],this.isStatic=!0}var d=a("Burner").Item,e=a("Burner").Utils;e.extend(c,d),c.prototype.step=function(){},c.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2]});this.el.style.cssText=a},c.prototype.getCSSText=function(a){return d._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%;"},b.exports.Point=c},{Burner:2}]},{},[1])(1)});
//# sourceMappingURL=Flora.min.js.map